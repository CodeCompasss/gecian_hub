(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1099],{1099:(e,t,l)=>{Promise.resolve().then(l.bind(l,8017))},3210:(e,t,l)=>{"use strict";l.d(t,{hg:()=>u,G6:()=>p});var a,s=l(6203),i=l(5317),r=l(3915),o=l(858),c=l(9509);let n={apiKey:c.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:c.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:c.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:c.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:c.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:c.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:c.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},d=Object.values(n).every(Boolean)&&null!=(a=0===(0,r.Dk)().length?(0,r.Wp)(n):(0,r.Dk)()[0])?a:null,m=d?(0,s.xI)(d):null,x=d?(0,i.aU)(d):null;function u(e){return m?m.onAuthStateChanged(e):(console.warn("Firebase auth is not initialized. Skipping listener."),()=>{})}async function p(){let e=new s.HF;e.setCustomParameters({display:"popup"});try{var t;if(!m)throw Error("Firebase auth is not initialized.");let l=(await (0,s.df)(m,e)).user;if(!(null==l?void 0:l.email))throw Error("Google sign-in failed");if("codecompass2024@gmail.com"!==l.email&&!/^[a-zA-Z0-9._%+-]+@gecskp\.ac\.in$/.test(l.email))throw Error("Only GEC SKP emails are allowed");if(!x)throw Error("Firebase firestore is not initialized.");let a=(0,i.H9)(x,"adminemail",l.email),r=await (0,i.x7)(a);return{isAdmin:r.exists()&&["admin","superadmin"].includes(null==(t=r.data())?void 0:t.role)}}catch(e){throw console.error("Error signing in with Google:",e),e}}d&&(0,o.c7)(d)},8017:(e,t,l)=>{"use strict";l.d(t,{default:()=>P});var a=l(5155),s=l(2115),i=l(2925),r=l(5695);let o=e=>{let{userName:t,semester:l,department:s,userPhotoURL:o}=e,c=(0,r.useRouter)(),n=null!=l&&function(e){return e>=1&&e<=8&&Number.isInteger(e)}(l)?"S".concat(l,", "):"",d=()=>{c.push("/profile")};return(0,a.jsx)("div",{className:"flex items-center justify-between px-4 py-7 bg-gradient-to-b from-transparent to-20% to-[var(--main)] shadow-[0_8px_20px_10px_var(--main)]",children:(0,a.jsxs)("div",{className:"flex max-w-[var(--max-screen-size)] w-full justify-between mx-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("p",{className:"truncate text-2xl text-foreground",children:["Hello, ",(0,a.jsx)("span",{className:"font-bold",children:t||"Guest"})]}),(0,a.jsxs)("p",{className:"truncate text-md text-foreground",children:[n,s&&s]})]}),(0,a.jsx)("button",{type:"button",className:"flex size-10 items-center justify-center rounded-full overflow-hidden bg-gray-600 transition-colors hover:bg-purple-300 dark:bg-purple-800 dark:hover:bg-purple-700",title:"User Profile","aria-label":"Open user profile",onClick:()=>d(),children:o?(0,a.jsx)("img",{src:o,alt:"User Profile",className:"object-cover w-full h-full"}):(0,a.jsx)(i.A,{size:"28",color:"white",variant:"Linear"})})]})})};var c=l(9355);let n=()=>{let e=[{text:"College Login",onClick:()=>window.open("https://gecskp.etlab.in/user/login","_blank","noopener,noreferrer")},{text:"Bus Time",onClick:()=>window.location.href="/bus"},{text:"Lost & Found",onClick:()=>window.location.href="/lost"},{text:"SGPA Calculator",onClick:()=>window.open("https://ktugpa.web.app/","_blank","noopener,noreferrer")},{text:"Hackathon",onClick:()=>window.open("https://devpost.com/hackathons","_blank","noopener,noreferrer")},{text:"College Map",onClick:()=>window.location.href="/floor"},{text:"Project Collobaration",onClick:()=>alert("Project Collobaration feature coming soon!")},{text:"Club",onClick:()=>window.location.href="/club"},{text:"Anonymous Complaint",onClick:()=>window.location.href="/complaint"},{text:"Private Hostel",onClick:()=>alert("Private Hostel information coming soon!")},{text:"Repeto",onClick:()=>window.open("https://codecompasss.github.io/repeto/","_blank","noopener,noreferrer")},{text:"Project Showcase",onClick:()=>window.open("https://codecompasss.github.io/project_archive/","_blank","noopener,noreferrer")}];return(0,a.jsx)("div",{"data-testid":"quick-actions",className:"pt-6 w-full space-y-4 md:mt-0 md:flex md:h-full md:flex-col md:justify-center lg:pt-0 xl:pt-0",children:(0,a.jsx)("div",{className:"md:flex md:flex-1 md:flex-col md:justify-center",children:(0,a.jsxs)("div",{className:"space-y-4 md:flex md:flex-1 md:flex-col md:justify-center lg:space-y-6 xl:space-y-8",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3 lg:gap-4 xl:gap-5",children:e.slice(0,2).map((e,t)=>(0,a.jsx)(c.I,{text:e.text,onClick:e.onClick},t))}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3 lg:gap-4 xl:gap-5",children:e.slice(2,5).map((e,t)=>(0,a.jsx)(c.I,{text:e.text,onClick:e.onClick},t+2))}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3 lg:gap-4 xl:gap-5",children:e.slice(5,7).map((e,t)=>(0,a.jsx)(c.I,{text:e.text,onClick:e.onClick},t+5))}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3 lg:gap-4 xl:gap-5",children:e.slice(7,10).map((e,t)=>(0,a.jsx)(c.I,{text:e.text,onClick:e.onClick},t+7))}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3 lg:gap-4 xl:gap-5",children:e.slice(10,12).map((e,t)=>(0,a.jsx)(c.I,{text:e.text,onClick:e.onClick},t+10))})]})})})};var d=l(965),m=l(3158);let x=[{day:"Monday",schedule:[{time:"09:30 AM - 10:30 AM",subject:"Period 1"},{time:"10:30 AM - 11:30 AM",subject:"Period 2"},{time:"11:30 AM - 12:30 AM",subject:"Period 3"},{time:"01:30 PM - 02:30 PM",subject:"Period 4"},{time:"02:30 PM - 03:30 PM",subject:"Period 5"},{time:"03:30 PM - 04:30 PM",subject:"Period 6"}]},{day:"Tuesday",schedule:[{time:"09:30 AM - 10:30 AM",subject:"Period 1"},{time:"10:30 AM - 11:30 AM",subject:"Period 2"},{time:"11:30 AM - 12:30 AM",subject:"Period 3"},{time:"01:30 PM - 02:30 PM",subject:"Period 4"},{time:"02:30 PM - 03:30 PM",subject:"Period 5"},{time:"03:30 PM - 04:30 PM",subject:"Period 6"}]},{day:"Wednessday",schedule:[{time:"09:30 AM - 10:30 AM",subject:"Period 1"},{time:"10:30 AM - 11:30 AM",subject:"Period 2"},{time:"11:30 AM - 12:30 AM",subject:"Period 3"},{time:"01:30 PM - 02:30 PM",subject:"Period 4"},{time:"02:30 PM - 03:30 PM",subject:"Period 5"},{time:"03:30 PM - 04:30 PM",subject:"Period 6"}]},{day:"Thursday",schedule:[{time:"09:30 AM - 10:30 AM",subject:"Period 1"},{time:"10:30 AM - 11:30 AM",subject:"Period 2"},{time:"11:30 AM - 12:30 AM",subject:"Period 3"},{time:"01:30 PM - 02:30 PM",subject:"Period 4"},{time:"02:30 PM - 03:30 PM",subject:"Period 5"},{time:"03:30 PM - 04:30 PM",subject:"Period 6"}]},{day:"Friday",schedule:[{time:"09:30 AM - 10:30 AM",subject:"Period 1"},{time:"10:30 AM - 11:30 AM",subject:"Period 2"},{time:"11:30 AM - 12:30 AM",subject:"Period 3"},{time:"02:00 PM - 02:50 PM",subject:"Period 4"},{time:"02:50 PM - 03:20 PM",subject:"Period 5"},{time:"03:20 AM - 04:30 PM",subject:"Period 6"}]}],u=e=>{let{day:t}=e;return(0,a.jsxs)("div",{className:"flex size-full flex-col",children:[(0,a.jsx)("h3",{className:"mb-4 text-center text-2xl text-[var(--text)]",children:t.day}),(0,a.jsx)("div",{className:"flex-1 space-y-2",children:t.schedule.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-around rounded-lg p-3 border border-[var(--text)]",children:[(0,a.jsx)("span",{className:"text-[var(--text)]",children:e.subject}),(0,a.jsx)("span",{className:"font-medium text-[var(--text)]",children:e.time})]},"".concat(e.time,"-").concat(e.subject)))})]})},p={day:"No Data",schedule:[]},h=e=>{var t;let{currentDay:l,onPrevDay:s,onNextDay:i}=e,r=null!=(t=x[l])?t:p;return(0,a.jsxs)("div",{className:"group relative w-full h-full min-h-0 flex flex-col",children:[(0,a.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden rounded-lg",children:(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)(u,{day:r})})}),(0,a.jsx)("button",{type:"button",onClick:s,disabled:l<=0,className:"absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-black/50 p-2 opacity-0 transition-opacity disabled:opacity-50 group-hover:opacity-100 z-10",children:(0,a.jsx)(d.A,{className:"size-5 text-white"})}),(0,a.jsx)("button",{type:"button",onClick:i,disabled:l>=x.length-1,className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-black/50 p-2 opacity-0 transition-opacity disabled:opacity-50 group-hover:opacity-100 z-10",children:(0,a.jsx)(m.A,{className:"size-5 text-white"})}),(0,a.jsx)("div",{className:"absolute bottom-4 left-1/2 flex -translate-x-1/2 space-x-2 z-10",children:x.map((e,t)=>(0,a.jsx)("div",{className:"size-2 rounded-full ".concat(l===t?"bg-black":"bg-black/50")},e.day))})]})};var b=l(408),g=l.n(b),j=l(490),f=l(542);let v=()=>{let[e,t]=(0,s.useState)(null),[l,i]=(0,s.useState)(null),[r,o]=(0,s.useState)(0),[c,n]=(0,s.useState)(!1),d=()=>n(e=>!e);return(0,s.useEffect)(()=>{let e=localStorage.getItem("timetableType");if("csv"===e){let e=localStorage.getItem("timetableCSV");e&&i(JSON.parse(e))}if("image"===e){let e=localStorage.getItem("timetableImage");e&&t(function(e,t){var l,a;let s=e.split(","),i=(null==(a=s[0])||null==(l=a.match(/:(.*?);/))?void 0:l[1])||"",r=atob(s[1]),o=r.length,c=new Uint8Array(o);for(;o--;)c[o]=r.charCodeAt(o);return new File([c],t,{type:i})}(e,"saved-image.png"))}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border border-[var(--text)] rounded-lg p-4 h-96 flex flex-col","data-testid":"timetable-block",children:[(0,a.jsxs)("div",{className:"relative flex-shrink-0 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("img",{className:"absolute h-16 z-10",src:"/scribble-circle.svg",alt:"Scribbled circle overlay"}),(0,a.jsx)("h2",{className:"ml-2 p-3 text-[2rem] font-medium text-[var(--text)] z-20",children:"Time Table"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 z-20 mr-2",children:[!e&&!l&&(0,a.jsxs)("label",{className:"flex items-center border border-[var(--text)] space-x-1 px-2 py-1 text-[var(--text)] rounded-lg cursor-pointer text-sm",children:[(0,a.jsx)(j.A,{size:18,color:"black",variant:"Bold"}),(0,a.jsx)("span",{children:"Upload"}),(0,a.jsx)("input",{type:"file",accept:".csv,image/*",onChange:e=>{var l;let a=null==(l=e.target.files)?void 0:l[0];if(!a)return;let s=new FileReader;s.onload=()=>{let e=s.result;"text/csv"===a.type||a.name.endsWith(".csv")?g().parse(a,{complete:e=>{t(a),i(e.data),localStorage.setItem("timetableType","csv"),localStorage.setItem("timetableCSV",JSON.stringify(e.data))},error:e=>{console.error("Error parsing CSV:",e)}}):a.type.startsWith("image/")&&(t(a),i(null),localStorage.setItem("timetableType","image"),localStorage.setItem("timetableImage",e))},a.type.startsWith("image/")?s.readAsDataURL(a):"text/csv"===a.type&&s.readAsText(a)},className:"hidden"})]}),(e||l)&&(0,a.jsxs)("button",{onClick:()=>{t(null),i(null),localStorage.removeItem("timetableCSV"),localStorage.removeItem("timetableImage"),localStorage.removeItem("timetableType")},className:"flex items-center border border-[var(--text)] space-x-1 px-2 py-1 text-[var(--text)] rounded-lg text-sm",children:[(0,a.jsx)(f.A,{size:18,color:"black",variant:"Bold"}),(0,a.jsx)("span",{children:"Remove"})]})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto rounded-xl min-h-0 justify-center items-center flex px-2 py-1",onClick:e||l?d:void 0,style:{cursor:e||l?"pointer":"default"},children:[(null==e?void 0:e.type.startsWith("image/"))&&(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:"Uploaded timetable",className:"max-h-full object-contain"}),l&&(0,a.jsx)("table",{className:"text-sm border bg-white max-w-full",children:(0,a.jsx)("tbody",{children:l.map((e,t)=>(0,a.jsx)("tr",{children:e.map((e,t)=>(0,a.jsx)("td",{className:"border px-2 py-1 whitespace-nowrap",children:e},t))},t))})}),!e&&!l&&(0,a.jsx)(h,{currentDay:r,onPrevDay:()=>o(e=>0===e?4:e-1),onNextDay:()=>o(e=>4===e?0:e+1)})]})]}),c&&(e||l)&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:d,children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 max-h-[90vh] overflow-auto",children:[(null==e?void 0:e.type.startsWith("image/"))&&(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:"Full timetable",className:"max-h-[80vh] max-w-full"}),l&&(0,a.jsx)("table",{className:"text-sm border bg-white",children:(0,a.jsx)("tbody",{children:l.map((e,t)=>(0,a.jsx)("tr",{children:e.map((e,t)=>(0,a.jsx)("td",{className:"border px-2 py-1",children:e},t))},t))})})]})})]})};var y=l(3210);let P=()=>{let[e,t]=(0,s.useState)(""),[l,i]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=(0,y.hg)(e=>{e?(t(e.displayName||"Student"),i(e.photoURL||null)):(t("Guest"),i(null))});return()=>e()},[]),(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(o,{userName:e,userPhotoURL:l}),(0,a.jsx)("div",{className:"mx-auto max-w-[var(--max-screen-size)] pt-4",children:(0,a.jsx)("main",{className:"px-3 pb-24",children:(0,a.jsxs)("div",{className:"md:flex lg:h-[calc(100vh-12rem)] md:gap-6 lg:gap-8",children:[(0,a.jsx)("section",{className:"flex flex-col justify-center w-full md:h-full md:w-1/2 mx-auto",children:(0,a.jsx)(v,{})}),(0,a.jsx)(n,{})]})})})]})}},9355:(e,t,l)=>{"use strict";l.d(t,{I:()=>s});var a=l(5155);l(2115);let s=e=>{let{text:t,onClick:l}=e;return(0,a.jsx)("button",{type:"button",className:"flex-1 rounded-xl bg-white py-4 text-sm font-medium text-[var(--text)] border border-[var(--text)]",onClick:l,children:t})}}}]);