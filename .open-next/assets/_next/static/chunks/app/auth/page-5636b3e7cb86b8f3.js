(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8365],{1431:(e,t,s)=>{Promise.resolve().then(s.bind(s,1579))},1579:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),i=s(2115),r=s(3210),l=s(5695),n=s(6766),o=s(6874),d=s.n(o);function c(){let[e,t]=(0,i.useState)(null),[s,o]=(0,i.useState)(!1),[c,m]=(0,i.useState)(!1),u=(0,l.useRouter)(),h=async()=>{if(!c)return void t("Please agree to the terms and services.");o(!0),t(null);try{let e=await (0,r.G6)();(null==e?void 0:e.isAdmin)?u.push("/admin"):u.push("/")}catch(e){console.error("Failed to log in with Google:",e),t(e instanceof Error?e.message:"Failed to log in with Google")}finally{o(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white dark:bg-black px-6 py-8 relative",children:[(0,a.jsx)(d(),{href:"/",className:"absolute top-6 left-6 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Go back",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),(0,a.jsx)("polyline",{points:"12 19 5 12 12 5"})]})}),(0,a.jsxs)("div",{className:"w-full max-w-md text-center space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold text-black dark:text-white",children:"Create your account"}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(n.default,{src:"/images/FingerprintImg.png",alt:"Fingerprint illustration",width:240,height:240,className:"rounded-xl w-[180px] h-[180px] md:w-[220px] md:h-[220px]",priority:!0})}),(0,a.jsx)("button",{onClick:h,disabled:s,"aria-label":"Continue with Google",type:"button",className:"flex items-center justify-center w-full py-3 px-6 rounded-full shadow-md  bg-white border border-gray-300 hover:bg-gray-100  transition-all disabled:opacity-60 disabled:cursor-not-allowed",children:s?(0,a.jsx)("span",{className:"text-base font-medium text-gray-600",children:"Logging in..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google logo",width:24,height:24,className:"w-5 h-5 md:w-6 md:h-6"}),(0,a.jsx)("span",{className:"ml-3 text-base font-medium text-gray-700",children:"Continue with Google"})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3 text-sm md:text-base",children:[(0,a.jsx)("input",{type:"checkbox",id:"terms",checked:c,onChange:()=>m(!c),className:"form-checkbox text-blue-600 w-4 h-4 md:w-5 md:h-5"}),(0,a.jsxs)("label",{htmlFor:"terms",className:"text-gray-600 dark:text-gray-400",children:["I agree to my ",(0,a.jsx)("span",{className:"font-semibold underline",children:"terms and services"})]})]}),e&&(0,a.jsx)("p",{className:"text-red-500 text-sm md:text-base",children:e})]})]})}},3210:(e,t,s)=>{"use strict";s.d(t,{hg:()=>h,G6:()=>x});var a,i=s(6203),r=s(5317),l=s(3915),n=s(858),o=s(9509);let d={apiKey:o.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:o.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:o.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:o.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:o.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:o.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:o.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},c=Object.values(d).every(Boolean)&&null!=(a=0===(0,l.Dk)().length?(0,l.Wp)(d):(0,l.Dk)()[0])?a:null,m=c?(0,i.xI)(c):null,u=c?(0,r.aU)(c):null;function h(e){return m?m.onAuthStateChanged(e):(console.warn("Firebase auth is not initialized. Skipping listener."),()=>{})}async function x(){let e=new i.HF;e.setCustomParameters({display:"popup"});try{var t;if(!m)throw Error("Firebase auth is not initialized.");let s=(await (0,i.df)(m,e)).user;if(!(null==s?void 0:s.email))throw Error("Google sign-in failed");if("codecompass2024@gmail.com"!==s.email&&!/^[a-zA-Z0-9._%+-]+@gecskp\.ac\.in$/.test(s.email))throw Error("Only GEC SKP emails are allowed");if(!u)throw Error("Firebase firestore is not initialized.");let a=(0,r.H9)(u,"adminemail",s.email),l=await (0,r.x7)(a);return{isAdmin:l.exists()&&["admin","superadmin"].includes(null==(t=l.data())?void 0:t.role)}}catch(e){throw console.error("Error signing in with Google:",e),e}}c&&(0,n.c7)(c)}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,6163,6874,302,6766,8441,1317,7358],()=>t(1431)),_N_E=e.O()}]);