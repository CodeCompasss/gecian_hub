(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4760],{5695:(e,t,s)=>{"use strict";var l=s(8999);s.o(l,"useParams")&&s.d(t,{useParams:function(){return l.useParams}}),s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}})},8748:(e,t,s)=>{Promise.resolve().then(s.bind(s,9540))},9540:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var l=s(5155),a=s(2115);function r(e){let{complaint:t}=e,[s,r]=(0,a.useState)(!1);return(0,l.jsxs)("div",{className:"border rounded-xl shadow-md p-4 mb-4 bg-white",children:[t.imageUrl&&(0,l.jsx)("div",{className:"w-full h-40 mb-3 rounded-md overflow-hidden bg-gray-100",children:(0,l.jsx)("img",{src:t.imageUrl,alt:"Complaint",className:"w-full h-full object-cover"})}),(0,l.jsx)("h2",{className:"text-lg font-semibold",children:t.title}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Complaint Time & Date: ",t.date]}),(0,l.jsx)("p",{className:"mt-2 text-gray-800",children:t.description}),(0,l.jsx)("button",{onClick:()=>r(!s),className:"mt-3 text-blue-600 underline text-sm",children:s?"Hide Comments":"Show Comments"}),s&&(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)("div",{className:"max-h-40 overflow-y-auto space-y-2 text-sm",children:t.comments&&t.comments.length>0?t.comments.map(e=>(0,l.jsxs)("div",{className:"border-b pb-1 text-gray-700",children:[e.text," (at ",new Date(e.timestamp).toLocaleString(),")"]},e.id)):(0,l.jsx)("p",{className:"text-gray-500",children:"No comments yet."})})})]})}function n(e){let{selected:t,onChange:s}=e;return(0,l.jsxs)("div",{className:"flex justify-center my-4",children:[(0,l.jsx)("button",{className:"px-4 py-1 rounded-l-full ".concat("solved"===t?"bg-blue-400 text-white":"border border-blue-400"),onClick:()=>s("solved"),children:"Solved"}),(0,l.jsx)("button",{className:"px-4 py-1 rounded-r-full ".concat("unsolved"===t?"bg-blue-400 text-white":"border border-blue-400"),onClick:()=>s("unsolved"),children:"Unsolved"})]})}var o=s(6874),c=s.n(o),i=s(5695);function d(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)("unsolved"),[o,d]=(0,a.useState)([]);return(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("/api/complaints");if(!e.ok)throw Error();let t=await e.json();d(t)}catch(e){console.error("Error fetching complaints:",e)}}()},[]),(0,l.jsxs)("div",{className:"min-h-screen p-4 pb-28 bg-gray-100",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-center mb-4",children:"Complaint"}),(0,l.jsx)(n,{selected:t,onChange:s}),o.filter(e=>e.solved===("solved"===t)).map(e=>(0,l.jsx)(r,{complaint:e},e.id)),(0,l.jsx)(c(),{href:"/complaint/new",children:(0,l.jsx)("button",{className:"fixed bottom-24 right-4 bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-full text-2xl shadow-lg","aria-label":"Add new complaint",children:"+"})}),(0,l.jsx)("button",{onClick:()=>e.back(),className:"text-xl absolute top-32 left-4 bg-white p-2 rounded-full shadow-md z-10","aria-label":"Go Back",children:"←"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6874,8441,1317,7358],()=>t(8748)),_N_E=e.O()}]);